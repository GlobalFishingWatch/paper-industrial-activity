Test detections
---------------

python test_detect_vessel.py

python upload_detect.py \
    -d scratch_fernando \
    -t test_v20210924_detections_ \
    -a test_detect_vessel_20220426/PARAMS_detections_20220426.json

python plot_detect_vessel.py


Test thumbnails
---------------

python export_thumbs_pred.py \
    infile=world-fishing-827.scratch_fernando.test_v20210924_detections_20220426 \
    outfile=gs://scratch_fernando/test_v20210924/thumbnails \
    logfile=test_exported.log \


Test predictions
----------------

python -m classification.vessels.predict \
    model=/home/fspaolo/dev/sentinel-1-ee/outputs/2021-10-28/18-09-22/model \
    data=gs://scratch_fernando/test_v20210924/thumbnails \
    +table=world-fishing-827.scratch_fernando.test_v20210924_predictions_20220426 \
    batch_size=1000 \

# Second test with Raul's TIFFs

python -m classification.vessels.predict \
    model=/home/fspaolo/dev/sentinel-1-ee/outputs/2021-10-28/18-09-22/model \
    data=gs://raul-import/test2 \
    +table=world-fishing-827.scratch_fernando.test_v20210924_predictions2_20220426 \
    +date=2022-04-26 \
    batch_size=1000 \


Test results
------------

GCS -> gs://{bucket}/{version}/{subbucket}/{YYYYMMDD}
BQ -> world-fishing-827.{dataset}.{table_prefix}{YYYYMMDD}
 
where
    dataset = {bucket}
    table_prefix = {version}{subbucket}
example
    gs://scratch_fernando/test_v20210924/detections/20220426
    world-fishing-827.scratch_fernando.test_v20210924_detections_20220426


Automation redults
------------------

Detections: world-fishing-827.proj_sentinel1_v20210924.detect_scene_raw_YYYYMMDD
Predictions: world-fishing-827.proj_sentinel1_v20210924.detect_scene_pred_YYYYMMDD
Footprints: world-fishing-827.proj_sentinel1_v20210924.detect_foot_raw_YYYYMMDD
Matchings: world-fishing-827.proj_sentinel1_v20210924.detect_scene_match
Detections: gs://gfw-production-sentinel1-detection-gee/v20210924/<date>
Footprints: gs://gfw-production-sentinel1-detection-footprints/v20210924/<date>
Thumbnails: gs://gfw-production-sentinel1-detection-thumbnails/v20210924/<date>

Raul's thumbnails -> gs://raul-import/test2
